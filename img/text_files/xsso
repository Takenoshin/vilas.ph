var xsso=function(e){"use strict";function n(e,n,t){if(t||2===arguments.length)for(var o,r=0,i=n.length;r<i;r++)!o&&r in n||(o||(o=Array.prototype.slice.call(n,0,r)),o[r]=n[r]);return e.concat(o||Array.prototype.slice.call(n))}var t,o,r=function(){return window},i=function(){return document};!function(e){e.Init="init",e.Set="set",e.Unchanged="unchanged",e.PollAborted="poll_aborted",e.LoginRequired="login_required",e.Limited="limited"}(t||(t={})),function(e){e.NotFound="not_found",e.Unsupported="unsupported",e.Changed="changed",e.Error="error",e.LoginPendingExpiry="login_pending_expiry",e.Polling="polling",e.Loaded="loaded",e.Login="login",e.Refresh="refresh",e.InvalidOrigin="invalid_origin",e.TooSoon="too_soon"}(o||(o={}));var a,u=Object.values(t).reduce((function(e,n){return e[n]=!0,e}),{}),c=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return function(n){try{n.apply(void 0,e)}catch(e){console.error(e)}}},l=t.Init,s=function(){return l},f=[],d=function(e){return f.forEach(c("error",e))},p=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];u[e]&&(l=e),void 0!==a&&c.apply(void 0,n([e],t))(a),f.forEach(c.apply(void 0,n([e],t)))},g=function(e){return i().querySelector(e)},h=function(e,n,t){return e.setAttribute(n,t)};var y=function(){return g("body")};function v(e,n){var t,o,r=g("#"+e);return r&&(null===(o=(t=r).parentElement)||void 0===o||o.removeChild(t)),(r=function(){var e=i().createElement("iframe");return h(e,"frameborder","0"),h(e,"width","0"),h(e,"height","0"),h(e,"style","display:block; visibility:hidden; height:0; width:0; left:0; top:0; position:absolute; opacity:0"),e}()).id=e,r.src=null!=n?n:"about:blank",r}function b(e,n){e.onload=function(){e.onload=null,setTimeout((function(){return n(e)}),0)}}function m(e,n,t){var o;null===(o=e.contentWindow)||void 0===o||o.postMessage(n,t)}function _(e){var n=e.cookie.split("; ").map((function(e){return e.split("=")}));return Object.fromEntries(n)}function k(){try{var e=_(i())["__Secure-id_hint"];if(e){var n=JSON.parse(decodeURIComponent(e));if("object"==typeof n&&null!==n)return n}}catch(e){d(e)}}function S(){try{return!!_(i())["__Secure-refresh_token_presence"]}catch(e){d(e)}return!1}function L(e){var n=e.origin+"riot-owned-iframe",t=v("riot-owned",n),o="login"===e.type?"prompt=none&response_type=code&client_id="+e.client_id+"&scope="+e.scope:"refresh";return b(t,(function(){return m(t,o,n)})),y().append(t),t}var w,E,x,O,P,R;function I(){s()!==t.Limited?L({origin:E,type:"login",client_id:O,scope:x}):p(t.Limited,"iframe login attempt skipped due to blocked third party cookies")}function U(){var e=s();if(e===t.Set||e===t.Unchanged||e===t.Limited)return k()}var j,q,A="xssoDebugEnabled",N=function(e,n){try{localStorage.getItem(A)&&console.table({eventType:e,message:n,state:s(),id:U()})}catch(e){}};function C(){p(o.Polling);var e=g("#check-session");if(e){var n=function(){try{var e=_(i())["__Secure-session_state"];if(e)return decodeURIComponent(e)}catch(e){d(e)}}();if(n){var r=function(){try{var e=_(i())["__Secure-session_expiry"];if(e)return decodeURIComponent(e)}catch(e){d(e)}}();if(r){if(Date.parse(r)<Date.now()+P)return void(R?(p(o.LoginPendingExpiry,"tokens about to expire, automatically trying to refresh"),L({origin:E,type:"refresh"})):p(t.LoginRequired,"pending token expiry detected"))}else if(R&&S())return p(o.LoginPendingExpiry,"Missing access token while refresh token available, automatically trying to refresh"),void L({origin:E,type:"refresh"});m(e,O+" "+n,E)}else I()}else p(t.PollAborted,"missing iframe")}function D(){void 0!==j&&clearTimeout(j),j=r().setTimeout(C,w)}function M(){k()?(p(t.Limited,"known but unable to poll session or login through iframe"),D()):S()?(p(o.LoginPendingExpiry,"Missing id hint while refresh token available, automatically trying to refresh"),L({origin:E,type:"refresh"})):p(t.LoginRequired,"unknown to local domain and unknown to issuer")}function T(e){return"string"==typeof e}function F(e){var n=e.automatic_refresh_enabled,t=e.token_expiry_buffer,o=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]])}return t}(e,["automatic_refresh_enabled","token_expiry_buffer"]);if(T(n)?o.automatic_refresh_enabled="true"===n:"boolean"==typeof n&&(o.automatic_refresh_enabled=n),T(t)){var r=Number.parseInt(t,10);Number.isNaN(r)||(o.token_expiry_buffer=r)}else"number"==typeof t&&(o.token_expiry_buffer=P);return o}return e.REFRESH_MESSAGE_KEY="refresh",e.attemptLoginPromptNone=I,e.disableDebug=function(){try{localStorage.removeItem(A)}catch(e){console.log("Failed to disable debug logging")}},e.enableDebug=function(){try{localStorage.setItem(A,"1")}catch(e){console.log("Failed to enable debug logging")}},e.handleUnsupported=M,e.id=U,e.init=function(e){var i,u,c,l,s=F(e);E=new URL(s.origin).toString(),O=s.client_id,w=null!==(i=s.interval)&&void 0!==i?i:15e3,P=null!==(u=s.token_expiry_buffer)&&void 0!==u?u:6e4,R=null!==(c=s.automatic_refresh_enabled)&&void 0!==c&&c,x=null!==(l=s.scope)&&void 0!==l?l:"openid account offline_access";var f,g,h,m={not_found:function(){return p(t.LoginRequired,"unknown to issuer")},unsupported:M,unchanged:D,set:D,changed:I,error:function(){return p(t.PollAborted,"unknown error in check-session iframe")},too_soon:D};void 0!==q&&r().removeEventListener("message",q,!1),f=E,g=function(e){var t="XSSO::";if(e.startsWith(t)){e=e.slice(t.length);var o,r,i=-1!==(r=(o=e).indexOf(" "))?[o.slice(0,r),o.slice(r+1)]:[o],a=i[0],u=i.slice(1);a in m&&m[a](),p.apply(void 0,n([a],u))}},h=function(e){try{var n=e,t=n.data,o=n.origin;new URL(o).toString()===f&&"string"==typeof t&&g(t)}catch(e){d(e)}},r().addEventListener("message",h,!1),q=h,function(e){a=e}(N),function(e){var n=e+"check-session-iframe",t=v("check-session",n);b(t,(function(){p(o.Loaded,n)})),y().append(t)}(E)},e.onEvent=function(e){return f.push(e)},e.parseSafeOptions=F,e.poll=C,e.requestPoll=D,e.state=s,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=xsso.min.js.map
;xsso.onEvent(type => type === 'loaded' && xsso.poll());xsso.init({client_id:'prod-xsso-riotgames',origin:'https://xsso.riotgames.com',issuer:'https://auth.riotgames.com',scope:'openid account email offline_access',token_expiry_buffer:'60000',automatic_refresh_enabled:'true'});